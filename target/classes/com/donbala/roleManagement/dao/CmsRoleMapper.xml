<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.donbala.roleManagement.dao.CmsRoleMapper">
    <resultMap id="BaseResultMap" type="com.donbala.roleManagement.model.CmsRole">
        <!--@mbg.generated-->
        <!--@Table CMS_ROLE-->
        <id column="ROLEID" jdbcType="VARCHAR" property="roleid"/>
        <result column="ROLENAME" jdbcType="VARCHAR" property="rolename"/>
        <result column="MAKEDATE" jdbcType="TIMESTAMP" property="makedate"/>
        <result column="MAKEUSER" jdbcType="VARCHAR" property="makeuser"/>
        <result column="MODIFYDATE" jdbcType="TIMESTAMP" property="modifydate"/>
        <result column="MODIFYUSER" jdbcType="VARCHAR" property="modifyuser"/>
    </resultMap>

    <sql id="Base_Column_List">
        <!--@mbg.generated-->
        ROLEID, ROLENAME,to_char(MAKEDATE,'yyyy-mm-dd hh24:mi:ss') MAKEDATE, MAKEUSER,to_char(MODIFYDATE,'yyyy-mm-dd
        hh24:mi:ss') MODIFYDATE, MODIFYUSER
    </sql>

    <insert id="insert" parameterType="com.donbala.roleManagement.model.CmsRole">
        <!--@mbg.generated-->
    insert into CMS_ROLE (ROLEID, ROLENAME, MAKEDATE, 
      MAKEUSER, MODIFYDATE, MODIFYUSER
      )
    values (#{roleid,jdbcType=VARCHAR}, #{rolename,jdbcType=VARCHAR}, sysdate,
      #{makeuser,jdbcType=VARCHAR}, sysdate, #{modifyuser,jdbcType=VARCHAR}
      )


    </insert>

    <!--auto generated by MybatisCodeHelper on 2020-08-25-->
    <select id="selectMenuByRoleid" resultType="java.lang.String">


    select MENUID
    from CMS_ROLEMENU
    where ROLEID=#{roleid,jdbcType=VARCHAR}


    </select>

    <!--auto generated by MybatisCodeHelper on 2020-08-25-->
    <delete id="deleteRoleMenuByRoleid">


    delete from CMS_ROLEMENU
    where ROLEID=#{roleid,jdbcType=VARCHAR}


    </delete>

    <!--auto generated by MybatisCodeHelper on 2020-08-25-->
    <insert id="insertList" parameterType="com.donbala.roleManagement.model.CmsRole">


    INSERT INTO CMS_ROLEMENU (
      ROLEID,MENUID,ROLENAME,MAKEDATE,MAKEUSER,MODIFYDATE,MODIFYUSER)
    select
      #{roleid,jdbcType=VARCHAR},
      t.*,
      #{rolename,jdbcType=VARCHAR},
      sysdate ,
      #{makeuser,jdbcType=VARCHAR},
      sysdate ,
      #{modifyuser,jdbcType=VARCHAR}
      from (


        <foreach collection="cmsRoleMenu" separator="union all" item="item" index="index">
            select #{item} from dual
        </foreach>


    )t


    </insert>

    <select     id="checkRoleName"  resultType="java.lang.Integer">

        SELECT COUNT(*) FROM CMS_ROLE WHERE rolename = #{rolename,jdbcType=VARCHAR}

    </select>
</mapper>